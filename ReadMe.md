# RsCutOffSystem - æŒ‰æ‘©åº—ç®¡ç†ç³»ç»Ÿ

![Java](https://img.shields.io/badge/Java-17-orange)
![Spring Boot](https://img.shields.io/badge/Spring%20Boot-3.0+-green)
![H2 Database](https://img.shields.io/badge/H2-Database-blue)
![MySQL](https://img.shields.io/badge/MySQL-8.0+-blue)
![License](https://img.shields.io/badge/License-MIT-yellow)

ä¸€ä¸ªä¸“ä¸ºæŒ‰æ‘©åº—è®¾è®¡çš„ç»¼åˆç®¡ç†ç³»ç»Ÿï¼Œæä¾›å®Œæ•´çš„ä¸šåŠ¡ç®¡ç†è§£å†³æ–¹æ¡ˆï¼ŒåŒ…æ‹¬ç”¨æˆ·ç®¡ç†ã€å®¢æˆ·ç®¡ç†ã€æœåŠ¡ç®¡ç†ã€äº¤æ˜“ç®¡ç†å’ŒæŠ¥è¡¨åˆ†æç­‰åŠŸèƒ½ã€‚

## ğŸ“‹ ç›®å½•

- [é¡¹ç›®ç®€ä»‹](#é¡¹ç›®ç®€ä»‹)
- [ä¸»è¦åŠŸèƒ½](#ä¸»è¦åŠŸèƒ½)
- [æŠ€æœ¯æ ˆ](#æŠ€æœ¯æ ˆ)
- [é¡¹ç›®ç»“æ„](#é¡¹ç›®ç»“æ„)
- [å¿«é€Ÿå¼€å§‹](#å¿«é€Ÿå¼€å§‹)
- [å¼€å‘ç¯å¢ƒé…ç½®](#å¼€å‘ç¯å¢ƒé…ç½®)
- [API æ–‡æ¡£](#api-æ–‡æ¡£)
- [æµ‹è¯•ç¯å¢ƒ](#æµ‹è¯•ç¯å¢ƒ)
- [ç”Ÿäº§ç¯å¢ƒéƒ¨ç½²](#ç”Ÿäº§ç¯å¢ƒéƒ¨ç½²)
- [è´¡çŒ®æŒ‡å—](#è´¡çŒ®æŒ‡å—)
- [è®¸å¯è¯](#è®¸å¯è¯)

## ğŸ“– é¡¹ç›®ç®€ä»‹

RsCutOffSystem æ˜¯ä¸€ä¸ªç°ä»£åŒ–çš„æŒ‰æ‘©åº—ç®¡ç†ç³»ç»Ÿï¼Œæ—¨åœ¨å¸®åŠ©æŒ‰æ‘©åº—æé«˜è¿è¥æ•ˆç‡ï¼Œä¼˜åŒ–å®¢æˆ·æœåŠ¡ä½“éªŒã€‚ç³»ç»Ÿé‡‡ç”¨ Spring Boot æ¡†æ¶å¼€å‘ï¼Œæä¾› RESTful API æ¥å£ï¼Œæ”¯æŒå‰åç«¯åˆ†ç¦»æ¶æ„ã€‚

### æ ¸å¿ƒç‰¹æ€§

- ğŸ¢ **å¤šè§’è‰²ç”¨æˆ·ç®¡ç†** - æ”¯æŒåº—é•¿ã€ç»ç†ã€æŠ€å¸ˆã€å‰å°ç­‰å¤šç§è§’è‰²
- ğŸ‘¥ **å®¢æˆ·å…³ç³»ç®¡ç†** - å®Œæ•´çš„å®¢æˆ·æ¡£æ¡ˆã€ä¼šå‘˜åˆ¶åº¦å’Œç§¯åˆ†ç³»ç»Ÿ
- ğŸ’¼ **æœåŠ¡é¡¹ç›®ç®¡ç†** - çµæ´»çš„æœåŠ¡åˆ†ç±»å’Œä»·æ ¼ç®¡ç†
- ğŸ’° **è´¢åŠ¡äº¤æ˜“ç®¡ç†** - è¯¦ç»†çš„æ”¶æ”¯è®°å½•å’Œæ—¥ç»“åŠŸèƒ½
- ğŸ“Š **æ•°æ®æŠ¥è¡¨åˆ†æ** - å¤šç»´åº¦çš„ä¸šåŠ¡åˆ†æå’Œç»Ÿè®¡æŠ¥è¡¨
- ğŸ”’ **å®‰å…¨æƒé™æ§åˆ¶** - åŸºäºè§’è‰²çš„è®¿é—®æ§åˆ¶å’Œæ•°æ®å®‰å…¨
- ğŸŒ **è·¨å¹³å°æ”¯æŒ** - RESTful API æ”¯æŒå¤šç§å‰ç«¯æŠ€æœ¯æ ˆ

## ğŸš€ ä¸»è¦åŠŸèƒ½

### 1. ç”¨æˆ·ç®¡ç†æ¨¡å—
- å‘˜å·¥è´¦æˆ·ç®¡ç†ï¼ˆåˆ›å»ºã€æ›´æ–°ã€ç¦ç”¨ï¼‰
- å¤šçº§è§’è‰²æƒé™æ§åˆ¶
- ç”¨æˆ·çŠ¶æ€ç®¡ç†å’Œå®¡æ ¸
- å‘˜å·¥ä¿¡æ¯æ¡£æ¡ˆç®¡ç†

### 2. å®¢æˆ·ç®¡ç†æ¨¡å—
- å®¢æˆ·åŸºæœ¬ä¿¡æ¯ç®¡ç†
- ä¼šå‘˜ç­‰çº§åˆ¶åº¦ï¼ˆé“œ/é“¶/é‡‘/ç™½é‡‘/é’»çŸ³ï¼‰
- ç§¯åˆ†ç³»ç»Ÿï¼ˆ1å…ƒ=1ç§¯åˆ†ï¼‰
- ç”Ÿæ—¥æé†’å’Œä¼šå‘˜åˆ°æœŸæé†’
- å®¢æˆ·æ´»è·ƒåº¦åˆ†æ

### 3. æœåŠ¡ç®¡ç†æ¨¡å—
- æœåŠ¡é¡¹ç›®åˆ†ç±»ç®¡ç†
- ä»·æ ¼å’Œæ—¶é•¿è®¾ç½®
- æœåŠ¡çŠ¶æ€æ§åˆ¶
- æ‰¹é‡ä»·æ ¼è°ƒæ•´
- æœåŠ¡ç»Ÿè®¡åˆ†æ

### 4. äº¤æ˜“ç®¡ç†æ¨¡å—
- æ”¶å…¥æ”¯å‡ºè®°å½•ç®¡ç†
- å¤šç§æ”¯ä»˜æ–¹å¼æ”¯æŒ
- å¤šå‘˜å·¥åä½œè®°å½•
- æ—¥ç»“åŠŸèƒ½
- è´¢åŠ¡ç»Ÿè®¡åˆ†æ

### 5. æŠ¥è¡¨ç®¡ç†æ¨¡å—
- è´¢åŠ¡æ±‡æ€»æŠ¥è¡¨
- å‘˜å·¥ä¸šç»©åˆ†æ
- å®¢æˆ·æ¶ˆè´¹åˆ†æ
- æœåŠ¡å—æ¬¢è¿åº¦ç»Ÿè®¡
- è‡ªå®šä¹‰æŠ¥è¡¨ç”Ÿæˆ

## ğŸ›  æŠ€æœ¯æ ˆ

### åç«¯æŠ€æœ¯
- **Java 17** - ç¼–ç¨‹è¯­è¨€
- **Spring Boot 3.0+** - åº”ç”¨æ¡†æ¶
- **Spring Data JPA** - æ•°æ®æŒä¹…åŒ–
- **Spring Security** - å®‰å…¨æ¡†æ¶
- **Hibernate** - ORM æ¡†æ¶
- **Maven** - é¡¹ç›®ç®¡ç†å·¥å…·

### æ•°æ®åº“
- **H2 Database** - å¼€å‘ç¯å¢ƒï¼ˆå†…å­˜/æ–‡ä»¶æ•°æ®åº“ï¼‰
- **MySQL 8.0+** - ç”Ÿäº§ç¯å¢ƒ

### å¼€å‘å·¥å…·
- **Spring Boot DevTools** - çƒ­é‡è½½
- **Lombok** - ä»£ç ç®€åŒ–
- **Jackson** - JSON åºåˆ—åŒ–
- **Validation** - æ•°æ®éªŒè¯

## ğŸ“ é¡¹ç›®ç»“æ„

```
RsCutOffSystem/
â”œâ”€â”€ .idea/                          # IntelliJ IDEA é…ç½®æ–‡ä»¶
â”œâ”€â”€ .mvn/                           # Maven åŒ…è£…å™¨æ–‡ä»¶
â”œâ”€â”€ APIæ–‡æ¡£/                        # API æ¥å£æ–‡æ¡£
â”‚   â”œâ”€â”€ Customer API æ–‡æ¡£.md
â”‚   â”œâ”€â”€ Report APIæ–‡æ¡£.md
â”‚   â”œâ”€â”€ Service API æ–‡æ¡£.md
â”‚   â”œâ”€â”€ Transaction API æ–‡æ¡£.md
â”‚   â””â”€â”€ User API æ–‡æ¡£.md
â”œâ”€â”€ data/                           # H2 æ•°æ®åº“æ–‡ä»¶ç›®å½•
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ main/
â”‚   â”‚   â”œâ”€â”€ java/
â”‚   â”‚   â”‚   â””â”€â”€ com.relaxationspa.rscutoffsystem/
â”‚   â”‚   â”‚       â”œâ”€â”€ controller/     # REST æ§åˆ¶å™¨
â”‚   â”‚   â”‚       â”‚   â”œâ”€â”€ CustomerController.java
â”‚   â”‚   â”‚       â”‚   â”œâ”€â”€ ReportController.java
â”‚   â”‚   â”‚       â”‚   â”œâ”€â”€ ServiceController.java
â”‚   â”‚   â”‚       â”‚   â”œâ”€â”€ TransactionController.java
â”‚   â”‚   â”‚       â”‚   â””â”€â”€ UserController.java
â”‚   â”‚   â”‚       â”œâ”€â”€ dto/            # æ•°æ®ä¼ è¾“å¯¹è±¡
â”‚   â”‚   â”‚       â”‚   â”œâ”€â”€ CustomerDTO.java
â”‚   â”‚   â”‚       â”‚   â”œâ”€â”€ ReportDTO.java
â”‚   â”‚   â”‚       â”‚   â”œâ”€â”€ ServiceDTO.java
â”‚   â”‚   â”‚       â”‚   â”œâ”€â”€ TransactionDTO.java
â”‚   â”‚   â”‚       â”‚   â””â”€â”€ UserDTO.java
â”‚   â”‚   â”‚       â”œâ”€â”€ entity/         # å®ä½“ç±»
â”‚   â”‚   â”‚       â”‚   â”œâ”€â”€ Customer.java
â”‚   â”‚   â”‚       â”‚   â”œâ”€â”€ Report.java
â”‚   â”‚   â”‚       â”‚   â”œâ”€â”€ Service.java
â”‚   â”‚   â”‚       â”‚   â”œâ”€â”€ Transaction.java
â”‚   â”‚   â”‚       â”‚   â”œâ”€â”€ TransactionItem.java
â”‚   â”‚   â”‚       â”‚   â””â”€â”€ User.java
â”‚   â”‚   â”‚       â”œâ”€â”€ exception/      # å¼‚å¸¸å¤„ç†
â”‚   â”‚   â”‚       â”œâ”€â”€ repository/     # æ•°æ®è®¿é—®å±‚
â”‚   â”‚   â”‚       â”‚   â”œâ”€â”€ CustomerRepository.java
â”‚   â”‚   â”‚       â”‚   â”œâ”€â”€ ReportRepository.java
â”‚   â”‚   â”‚       â”‚   â”œâ”€â”€ ServiceRepository.java
â”‚   â”‚   â”‚       â”‚   â”œâ”€â”€ TransactionRepository.java
â”‚   â”‚   â”‚       â”‚   â””â”€â”€ UserRepository.java
â”‚   â”‚   â”‚       â”œâ”€â”€ service/        # ä¸šåŠ¡é€»è¾‘å±‚
â”‚   â”‚   â”‚       â”‚   â”œâ”€â”€ CustomerService.java
â”‚   â”‚   â”‚       â”‚   â”œâ”€â”€ ReportService.java
â”‚   â”‚   â”‚       â”‚   â”œâ”€â”€ ServiceService.java
â”‚   â”‚   â”‚       â”‚   â”œâ”€â”€ TransactionService.java
â”‚   â”‚   â”‚       â”‚   â””â”€â”€ UserService.java
â”‚   â”‚   â”‚       â””â”€â”€ RsCutOffSystemApplication.java
â”‚   â”‚   â””â”€â”€ resources/
â”‚   â”‚       â”œâ”€â”€ static/             # é™æ€èµ„æº
â”‚   â”‚       â”œâ”€â”€ templates/          # æ¨¡æ¿æ–‡ä»¶
â”‚   â”‚       â”œâ”€â”€ application.properties          # å¼€å‘ç¯å¢ƒé…ç½®
â”‚   â”‚       â””â”€â”€ application-prod.properties     # ç”Ÿäº§ç¯å¢ƒé…ç½®
â”‚   â””â”€â”€ test/                       # æµ‹è¯•æ–‡ä»¶
â”œâ”€â”€ target/                         # ç¼–è¯‘è¾“å‡ºç›®å½•
â”œâ”€â”€ .gitattributes                  # Git å±æ€§é…ç½®
â”œâ”€â”€ mvnw                           # Maven åŒ…è£…å™¨è„šæœ¬ (Unix)
â”œâ”€â”€ mvnw.cmd                       # Maven åŒ…è£…å™¨è„šæœ¬ (Windows)
â”œâ”€â”€ pom.xml                        # Maven é¡¹ç›®é…ç½®
â””â”€â”€ README.md                      # é¡¹ç›®è¯´æ˜æ–‡æ¡£
```

## ğŸš€ å¿«é€Ÿå¼€å§‹

### å‰ç½®è¦æ±‚

- Java 17 æˆ–æ›´é«˜ç‰ˆæœ¬
- Maven 3.6+ æˆ–ä½¿ç”¨é¡¹ç›®è‡ªå¸¦çš„ Maven åŒ…è£…å™¨
- IDEï¼šIntelliJ IDEAï¼ˆæ¨èï¼‰æˆ– Eclipse

### 1. å…‹éš†é¡¹ç›®

```bash
git clone <repository-url>
cd RsCutOffSystem
```

### 2. æ„å»ºé¡¹ç›®

ä½¿ç”¨ Maven åŒ…è£…å™¨ï¼ˆæ¨èï¼‰ï¼š

```bash
# Windows
./mvnw clean install

# macOS/Linux
./mvnw clean install
```

æˆ–ä½¿ç”¨æœ¬åœ° Mavenï¼š

```bash
mvn clean install
```

### 3. è¿è¡Œåº”ç”¨

```bash
# ä½¿ç”¨ Maven åŒ…è£…å™¨
./mvnw spring-boot:run

# æˆ–ä½¿ç”¨ java -jar
java -jar target/RsCutOffSystem-*.jar
```

### 4. è®¿é—®åº”ç”¨

- **åº”ç”¨åœ°å€**: http://localhost:8080
- **H2 æ•°æ®åº“æ§åˆ¶å°**: http://localhost:8080/h2-console
  - JDBC URL: `jdbc:h2:file:./data/rscutoff_dev`
  - ç”¨æˆ·å: `sa`
  - å¯†ç : (ç©º)

## ğŸ”§ å¼€å‘ç¯å¢ƒé…ç½®

### IDE é…ç½®

#### IntelliJ IDEA
1. æ‰“å¼€é¡¹ç›®æ ¹ç›®å½•
2. ç¡®ä¿ Project SDK è®¾ç½®ä¸º Java 17+
3. å®‰è£…æ¨èæ’ä»¶ï¼š
  - Lombok Plugin
  - Spring Boot Helper
  - Database Navigator

#### å¼€å‘ç¯å¢ƒç‰¹æ€§
- **çƒ­é‡è½½**: ä½¿ç”¨ Spring Boot DevToolsï¼Œä¿®æ”¹ä»£ç åè‡ªåŠ¨é‡å¯
- **æ•°æ®åº“**: H2 æ–‡ä»¶æ•°æ®åº“ï¼Œæ•°æ®æŒä¹…åŒ–åˆ° `./data/` ç›®å½•
- **æ—¥å¿—çº§åˆ«**: DEBUGï¼Œä¾¿äºå¼€å‘è°ƒè¯•
- **SQL æ˜¾ç¤º**: å¯ç”¨ SQL è¯­å¥æ‰“å°å’Œæ ¼å¼åŒ–

### ç¯å¢ƒå˜é‡é…ç½®

å¼€å‘ç¯å¢ƒä¸éœ€è¦é¢å¤–çš„ç¯å¢ƒå˜é‡é…ç½®ï¼Œæ‰€æœ‰é…ç½®éƒ½åœ¨ `application.properties` ä¸­ã€‚

### æ•°æ®åº“åˆå§‹åŒ–

é¦–æ¬¡å¯åŠ¨æ—¶ï¼ŒHibernate ä¼šè‡ªåŠ¨åˆ›å»ºæ•°æ®åº“è¡¨ç»“æ„ï¼ˆ`ddl-auto=create`ï¼‰ã€‚

## ğŸ“š API æ–‡æ¡£

ç³»ç»Ÿæä¾›å®Œæ•´çš„ RESTful API æ¥å£ï¼Œè¯¦ç»†æ–‡æ¡£è¯·å‚è€ƒï¼š

- [ç”¨æˆ·ç®¡ç† API](./APIæ–‡æ¡£/User%20API%20æ–‡æ¡£.md) - å‘˜å·¥è´¦æˆ·å’Œæƒé™ç®¡ç†
- [å®¢æˆ·ç®¡ç† API](./APIæ–‡æ¡£/Customer%20API%20æ–‡æ¡£.md) - å®¢æˆ·ä¿¡æ¯å’Œä¼šå‘˜ç®¡ç†
- [æœåŠ¡ç®¡ç† API](./APIæ–‡æ¡£/Service%20API%20æ–‡æ¡£.md) - æœåŠ¡é¡¹ç›®å’Œä»·æ ¼ç®¡ç†
- [äº¤æ˜“ç®¡ç† API](./APIæ–‡æ¡£/Transaction%20API%20æ–‡æ¡£.md) - è´¢åŠ¡äº¤æ˜“å’Œæ—¥ç»“ç®¡ç†
- [æŠ¥è¡¨ç®¡ç† API](./APIæ–‡æ¡£/Report%20APIæ–‡æ¡£.md) - æ•°æ®åˆ†æå’ŒæŠ¥è¡¨ç”Ÿæˆ

### API åŸºç¡€ä¿¡æ¯

- **åŸºç¡€ URL**: `http://localhost:8080/api`
- **å“åº”æ ¼å¼**: JSON
- **å­—ç¬¦ç¼–ç **: UTF-8
- **æ—¶åŒº**: Asia/Shanghai
- **è·¨åŸŸ**: å·²å¼€å¯ CORS æ”¯æŒ

### å¸¸ç”¨ API ç«¯ç‚¹

```bash
# å¥åº·æ£€æŸ¥
GET /api/health

# ç”¨æˆ·ç®¡ç†
GET /api/users
POST /api/users

# å®¢æˆ·ç®¡ç†  
GET /api/customers
POST /api/customers

# æœåŠ¡ç®¡ç†
GET /api/services
POST /api/services

# äº¤æ˜“ç®¡ç†
GET /api/transactions
POST /api/transactions

# æŠ¥è¡¨ç®¡ç†
GET /api/reports
POST /api/reports
```

## ğŸ§ª æµ‹è¯•ç¯å¢ƒ

### å‰ç«¯å¼€å‘æµ‹è¯•é…ç½®

å½“å‰ç«¯å¼€å‘äººå‘˜éœ€è¦è¿æ¥åç«¯ API æ—¶ï¼š

#### 1. å¯åŠ¨åç«¯æœåŠ¡

```bash
# ç¡®ä¿åç«¯æœåŠ¡è¿è¡Œåœ¨ 8080 ç«¯å£
./mvnw spring-boot:run
```

#### 2. å‰ç«¯é¡¹ç›®é…ç½®

åœ¨å‰ç«¯é¡¹ç›®ä¸­é…ç½® API åŸºç¡€ URLï¼š

```javascript
// å¼€å‘ç¯å¢ƒé…ç½®
const API_BASE_URL = 'http://localhost:8080/api';

// æˆ–ä½¿ç”¨ç¯å¢ƒå˜é‡
const API_BASE_URL = process.env.REACT_APP_API_URL || 'http://localhost:8080/api';
```

#### 3. è·¨åŸŸå¤„ç†

åç«¯å·²é…ç½® CORS å…è®¸æ‰€æœ‰æ¥æºè®¿é—®ï¼ˆ`@CrossOrigin(origins = "*")`ï¼‰ï¼Œå‰ç«¯æ— éœ€é¢å¤–é…ç½®ã€‚

#### 4. æµ‹è¯•æ•°æ®

ç³»ç»Ÿæä¾›åˆå§‹åŒ–æ¥å£åˆ›å»ºæµ‹è¯•æ•°æ®ï¼š

```bash
# åˆå§‹åŒ–é»˜è®¤æœåŠ¡
POST http://localhost:8080/api/services/initialize

# åˆ›å»ºæµ‹è¯•ç”¨æˆ·
POST http://localhost:8080/api/users
{
  "username": "testuser",
  "password": "password123",
  "name": "æµ‹è¯•ç”¨æˆ·",
  "email": "test@example.com",
  "role": "STAFF"
}
```

### API æµ‹è¯•å·¥å…·

æ¨èä½¿ç”¨ä»¥ä¸‹å·¥å…·æµ‹è¯• APIï¼š

- **Postman** - GUI å·¥å…·ï¼Œæ–¹ä¾¿è°ƒè¯•
- **curl** - å‘½ä»¤è¡Œå·¥å…·
- **Insomnia** - è½»é‡çº§ API å®¢æˆ·ç«¯

### ç¤ºä¾‹ API è°ƒç”¨

```bash
# è·å–æ‰€æœ‰ç”¨æˆ·
curl -X GET http://localhost:8080/api/users

# åˆ›å»ºå®¢æˆ·
curl -X POST http://localhost:8080/api/customers \
  -H "Content-Type: application/json" \
  -d '{
    "name": "å¼ ä¸‰",
    "phone": "1234567890",
    "customerType": "MEMBER",
    "membershipLevel": "GOLD"
  }'

# åˆ›å»ºäº¤æ˜“
curl -X POST http://localhost:8080/api/transactions \
  -H "Content-Type: application/json" \
  -d '{
    "type": "INCOME",
    "transactionDate": "2024-06-18",
    "relatedUserUuids": ["user-uuid"],
    "paymentMethod": "CASH",
    "items": [{
      "category": "SERVICE_MASSAGE",
      "amount": 100.00
    }]
  }'
```

## ğŸš€ ç”Ÿäº§ç¯å¢ƒéƒ¨ç½²

### 1. ç¯å¢ƒå‡†å¤‡

#### æœåŠ¡å™¨è¦æ±‚
- **æ“ä½œç³»ç»Ÿ**: Linux (Ubuntu 20.04+ æ¨è)
- **Java**: OpenJDK 17 æˆ– Oracle JDK 17
- **å†…å­˜**: æœ€å°‘ 2GBï¼Œæ¨è 4GB+
- **ç£ç›˜**: 10GB+ å¯ç”¨ç©ºé—´
- **æ•°æ®åº“**: MySQL 8.0+

#### å®‰è£… Java 17

```bash
# Ubuntu/Debian
sudo apt update
sudo apt install openjdk-17-jdk

# CentOS/RHEL
sudo yum install java-17-openjdk-devel

# éªŒè¯å®‰è£…
java -version
```

### 2. æ•°æ®åº“é…ç½®

#### MySQL å®‰è£…å’Œé…ç½®

```bash
# Ubuntu/Debian
sudo apt install mysql-server

# å¯åŠ¨æœåŠ¡
sudo systemctl start mysql
sudo systemctl enable mysql

# å®‰å…¨é…ç½®
sudo mysql_secure_installation
```

#### åˆ›å»ºæ•°æ®åº“å’Œç”¨æˆ·

```sql
-- è¿æ¥åˆ° MySQL
mysql -u root -p

-- åˆ›å»ºæ•°æ®åº“
CREATE DATABASE rscutoff_db CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci;

-- åˆ›å»ºç”¨æˆ·
CREATE USER 'rscutoff_user'@'localhost' IDENTIFIED BY 'your_secure_password';

-- æˆæƒ
GRANT ALL PRIVILEGES ON rscutoff_db.* TO 'rscutoff_user'@'localhost';
FLUSH PRIVILEGES;

-- é€€å‡º
EXIT;
```

### 3. åº”ç”¨é…ç½®

#### ç”Ÿäº§ç¯å¢ƒé…ç½®æ–‡ä»¶

åœ¨ `application-prod.properties` ä¸­å·²é…ç½®ç”Ÿäº§ç¯å¢ƒå‚æ•°ï¼š

```properties
# æ•°æ®åº“é…ç½®
spring.datasource.url=jdbc:mysql://localhost:3306/rscutoff_db?createDatabaseIfNotExist=true&useSSL=false&allowPublicKeyRetrieval=true&serverTimezone=Asia/Shanghai
spring.datasource.username=rscutoff_user
spring.datasource.password=${DB_PASSWORD:rscutoff_password}

# JPA é…ç½®
spring.jpa.hibernate.ddl-auto=validate
spring.jpa.show-sql=false

# æ—¥å¿—é…ç½®
logging.level.com.relaxationspa.rscutoffsystem=INFO
```

#### ç¯å¢ƒå˜é‡è®¾ç½®

```bash
# è®¾ç½®æ•°æ®åº“å¯†ç 
export DB_PASSWORD=your_secure_password

# æˆ–åˆ›å»ºç¯å¢ƒé…ç½®æ–‡ä»¶
echo "DB_PASSWORD=your_secure_password" > /opt/rscutoff/.env
```

### 4. æ„å»ºå’Œéƒ¨ç½²

#### æ„å»ºåº”ç”¨

```bash
# ç”Ÿäº§ç¯å¢ƒæ„å»º
./mvnw clean package -Pprod

# æˆ–è·³è¿‡æµ‹è¯•å¿«é€Ÿæ„å»º
./mvnw clean package -DskipTests
```

#### éƒ¨ç½²åº”ç”¨

```bash
# åˆ›å»ºåº”ç”¨ç›®å½•
sudo mkdir -p /opt/rscutoff
sudo chown $USER:$USER /opt/rscutoff

# å¤åˆ¶ JAR æ–‡ä»¶
cp target/RsCutOffSystem-*.jar /opt/rscutoff/app.jar

# åˆ›å»ºå¯åŠ¨è„šæœ¬
cat > /opt/rscutoff/start.sh << 'EOF'
#!/bin/bash
cd /opt/rscutoff
source .env 2>/dev/null || true
java -jar app.jar --spring.profiles.active=prod
EOF

chmod +x /opt/rscutoff/start.sh
```

### 5. ç³»ç»ŸæœåŠ¡é…ç½®

#### åˆ›å»º systemd æœåŠ¡

```bash
sudo tee /etc/systemd/system/rscutoff.service > /dev/null << 'EOF'
[Unit]
Description=RsCutOff System
After=network.target mysql.service

[Service]
Type=simple
User=ubuntu
WorkingDirectory=/opt/rscutoff
Environment=SPRING_PROFILES_ACTIVE=prod
EnvironmentFile=-/opt/rscutoff/.env
ExecStart=/usr/bin/java -jar app.jar
Restart=always
RestartSec=10

[Install]
WantedBy=multi-user.target
EOF

# é‡è½½é…ç½®
sudo systemctl daemon-reload

# å¯åŠ¨æœåŠ¡
sudo systemctl start rscutoff
sudo systemctl enable rscutoff

# æŸ¥çœ‹çŠ¶æ€
sudo systemctl status rscutoff
```

### 6. åå‘ä»£ç†é…ç½® (Nginx)

#### å®‰è£… Nginx

```bash
sudo apt install nginx
```

#### é…ç½®ç«™ç‚¹

```bash
sudo tee /etc/nginx/sites-available/rscutoff > /dev/null << 'EOF'
server {
    listen 80;
    server_name your-domain.com;

    location / {
        proxy_pass http://localhost:8080;
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header X-Forwarded-Proto $scheme;
    }
}
EOF

# å¯ç”¨ç«™ç‚¹
sudo ln -s /etc/nginx/sites-available/rscutoff /etc/nginx/sites-enabled/
sudo nginx -t
sudo systemctl restart nginx
```

### 7. SSL è¯ä¹¦é…ç½® (Let's Encrypt)

```bash
# å®‰è£… Certbot
sudo apt install certbot python3-certbot-nginx

# è·å–è¯ä¹¦
sudo certbot --nginx -d your-domain.com

# è‡ªåŠ¨ç»­æœŸ
sudo crontab -e
# æ·»åŠ ä»¥ä¸‹è¡Œï¼š
# 0 12 * * * /usr/bin/certbot renew --quiet
```

### 8. æ•°æ®åº“è¿ç§»

é¦–æ¬¡éƒ¨ç½²æ—¶éœ€è¦åˆå§‹åŒ–æ•°æ®åº“ç»“æ„ï¼š

```bash
# ä¸´æ—¶è®¾ç½® ddl-auto ä¸º create
# åœ¨ application-prod.properties ä¸­ä¿®æ”¹ï¼š
# spring.jpa.hibernate.ddl-auto=create

# å¯åŠ¨åº”ç”¨è¿›è¡Œåˆå§‹åŒ–
sudo systemctl start rscutoff

# æŸ¥çœ‹æ—¥å¿—ç¡®è®¤è¡¨åˆ›å»ºæˆåŠŸ
sudo journalctl -u rscutoff -f

# åœæ­¢åº”ç”¨ï¼Œæ¢å¤é…ç½®
sudo systemctl stop rscutoff
# å°† ddl-auto æ”¹å› validate

# é‡æ–°å¯åŠ¨
sudo systemctl start rscutoff
```

### 9. ç›‘æ§å’Œç»´æŠ¤

#### æ—¥å¿—ç®¡ç†

```bash
# æŸ¥çœ‹åº”ç”¨æ—¥å¿—
sudo journalctl -u rscutoff -f

# æŸ¥çœ‹æœ€è¿‘çš„é”™è¯¯
sudo journalctl -u rscutoff --since "1 hour ago" -p err

# è®¾ç½®æ—¥å¿—è½®è½¬
sudo tee /etc/logrotate.d/rscutoff > /dev/null << 'EOF'
/opt/rscutoff/logs/*.log {
    daily
    missingok
    rotate 30
    compress
    delaycompress
    notifempty
    create 0644 ubuntu ubuntu
}
EOF
```

#### æ€§èƒ½ç›‘æ§

```bash
# ç›‘æ§åº”ç”¨è¿›ç¨‹
htop

# ç›‘æ§æ•°æ®åº“
mysql -u rscutoff_user -p -e "SHOW PROCESSLIST;"

# ç£ç›˜ä½¿ç”¨æƒ…å†µ
df -h

# å†…å­˜ä½¿ç”¨æƒ…å†µ
free -h
```

#### å¤‡ä»½ç­–ç•¥

```bash
# åˆ›å»ºæ•°æ®åº“å¤‡ä»½è„šæœ¬
cat > /opt/rscutoff/backup.sh << 'EOF'
#!/bin/bash
BACKUP_DIR="/opt/rscutoff/backups"
DATE=$(date +%Y%m%d_%H%M%S)

mkdir -p $BACKUP_DIR

# æ•°æ®åº“å¤‡ä»½
mysqldump -u rscutoff_user -p$DB_PASSWORD rscutoff_db > $BACKUP_DIR/db_backup_$DATE.sql

# åˆ é™¤ 30 å¤©å‰çš„å¤‡ä»½
find $BACKUP_DIR -name "*.sql" -mtime +30 -delete
EOF

chmod +x /opt/rscutoff/backup.sh

# è®¾ç½®å®šæ—¶å¤‡ä»½
sudo crontab -e
# æ·»åŠ ä»¥ä¸‹è¡Œï¼ˆæ¯å¤©å‡Œæ™¨ 2 ç‚¹å¤‡ä»½ï¼‰ï¼š
# 0 2 * * * /opt/rscutoff/backup.sh
```

### 10. å®‰å…¨é…ç½®

#### é˜²ç«å¢™è®¾ç½®

```bash
# é…ç½® ufw
sudo ufw allow ssh
sudo ufw allow 'Nginx Full'
sudo ufw allow mysql
sudo ufw enable
```

#### åº”ç”¨å®‰å…¨

- å®šæœŸæ›´æ–°ç³»ç»Ÿå’Œ Java
- ä½¿ç”¨å¼ºå¯†ç 
- é™åˆ¶æ•°æ®åº“è®¿é—®æƒé™
- é…ç½® HTTPS
- å®šæœŸå¤‡ä»½æ•°æ®

## ğŸ¤ è´¡çŒ®æŒ‡å—

æˆ‘ä»¬æ¬¢è¿ä»»ä½•å½¢å¼çš„è´¡çŒ®ï¼è¯·éµå¾ªä»¥ä¸‹æ­¥éª¤ï¼š

1. Fork é¡¹ç›®
2. åˆ›å»ºåŠŸèƒ½åˆ†æ”¯ (`git checkout -b feature/AmazingFeature`)
3. æäº¤æ›´æ”¹ (`git commit -m 'Add some AmazingFeature'`)
4. æ¨é€åˆ°åˆ†æ”¯ (`git push origin feature/AmazingFeature`)
5. å¼€å¯ Pull Request

### ä»£ç è§„èŒƒ

- éµå¾ª Java ä»£ç è§„èŒƒ
- ä½¿ç”¨æœ‰æ„ä¹‰çš„å˜é‡å’Œæ–¹æ³•å
- æ·»åŠ é€‚å½“çš„æ³¨é‡Š
- ç¼–å†™å•å…ƒæµ‹è¯•

## ğŸ“„ è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨ MIT è®¸å¯è¯ - æŸ¥çœ‹ [LICENSE](LICENSE) æ–‡ä»¶äº†è§£è¯¦æƒ…ã€‚

## ğŸ“ æ”¯æŒä¸è”ç³»

å¦‚æœæ‚¨åœ¨ä½¿ç”¨è¿‡ç¨‹ä¸­é‡åˆ°é—®é¢˜æˆ–æœ‰ä»»ä½•å»ºè®®ï¼Œè¯·ï¼š

- åˆ›å»º [Issue](../../issues)
- å‘é€é‚®ä»¶è‡³ï¼šsupport@relaxationspa.com
- æŸ¥çœ‹ [Wiki](../../wiki) äº†è§£æ›´å¤šä¿¡æ¯

---

**æ„Ÿè°¢æ‚¨ä½¿ç”¨ RsCutOffSystemï¼** ğŸ‰